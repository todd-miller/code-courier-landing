name: Courier

on: push

jobs:
  build:
    runs-on: ubuntu-latest    

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN}}
         
      - name: Push to Remote
        run: |
          git remote rm origin
          git remote add origin https://todd-miller:${{secrets.GITHUB_TOKEN}}@github.com/todd-miller/code-courier-landing.git
          git remote -v
          git show-ref
          git push --set-upstream origin ${GITHUB_REF##*/} 

      - name: Open PR 
        uses: repo-sync/pull-request@v2 
        with:
          github_token: ${{ secrets.ACCESS_TOKEN }}

          destination_branch: "main"
          destination_repository: "todd-miller/code-courier-landing"
     
      - name: output-url
        run: echo ${{steps.open-pr.outputs.pr_url}}
      - name: output-number
        run: echo ${{steps.open-pr.outputs.pr_number}}
      - name: output-created
        run: echo ${{steps.open-pr.outputs.pr_created}}
      - name: output-has-changed-files 
        run: echo ${{steps.open-pr.outputs.has_changed_files}}
